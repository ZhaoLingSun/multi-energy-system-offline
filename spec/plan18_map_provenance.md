# Plan18Map 来源与验证

## 概述

本文档记录 Plan18 映射表（`spec/plan18_map.yaml`）的数据来源、验证方法和与平台的对比结果。

## 数据来源

### 主要来源

1. **平台导出文件**：`example/平台导出文件.xls`
   - 规划行 col2 编码：201-218
   - 设备名称：col3 指标名
   - 容量值：col8 数值

2. **官方 reshape 脚本**：`matlab/scripts/MEHW_data_reshape.m`
   - 第 30-31 行定义输出列顺序
   - 规划行筛选条件：`col2 > 200`

3. **技术路线文档**：`docs/阶段2技术路线.md`
   - 第 164-173 行定义 Plan18 顺序契约

### 验证步骤

1. 从平台导出文件提取规划行（col2 > 200）
2. 按 col2 升序排列（201, 202, ..., 218）
3. 记录每行的设备名称和编码
4. 与官方 reshape 脚本输出对比

## 设备映射表

| idx | code | device_name | unit | base_capacity |
|-----|------|-------------|------|---------------|
| 1 | 201 | 热电联产A | MW | 100 |
| 2 | 202 | 热电联产B | MW | 100 |
| 3 | 203 | 热电联产C | MW | 100 |
| 4 | 204 | 燃气锅炉 | MW | 100 |
| 5 | 205 | 电锅炉 | MW | 100 |
| 6 | 206 | 吸收式制冷机 | MW | 100 |
| 7 | 207 | 电制冷机 | MW | 100 |
| 8 | 208 | 热泵 | MW | 100 |
| 9 | 209 | 变压器 | MW | 100 |
| 10 | 210 | 蓄热罐 | MWh | 100 |
| 11 | 211 | 蓄电池 | MWh | 100 |
| 12 | 212 | 蓄冷罐 | MWh | 100 |
| 13 | 213 | 电制气 | MW | 100 |
| 14 | 214 | 风电 | MW | 100 |
| 15 | 215 | 光伏 | MW | 100 |
| 16 | 216 | 燃气轮机 | MW | 100 |
| 17 | 217 | 内燃机 | MW | 100 |
| 18 | 218 | CCHP | MW | 100 |

## 验证结果

### 与平台对比

| 验证项 | 结果 | 说明 |
|--------|------|------|
| 设备数量 | ✅ 通过 | 18 种设备 |
| 编码顺序 | ✅ 通过 | 201-218 连续 |
| 设备名称 | ✅ 通过 | 与平台导出一致 |
| 单位 | ✅ 通过 | MW/MWh |

### 与 reshape 脚本对比

| 验证项 | 结果 | 说明 |
|--------|------|------|
| 筛选条件 | ✅ 通过 | col2 > 200 |
| 输出顺序 | ✅ 通过 | ans_planning(1:18) |
| 数值映射 | ✅ 通过 | col8 → ans_planning |

## 变更历史

| 日期 | 变更 | 原因 |
|------|------|------|
| 2025-12-20 | 初始创建 | 阶段2交付物 |

## 相关文件

- `spec/plan18_map.yaml` - YAML 格式映射表
- `spec/plan18_map.md` - 人读说明文档
- `matlab/src/common/utils/load_plan18_map.m` - 加载器
